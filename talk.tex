\documentclass[english]{slides}
\usepackage[english]{common}

\renewcommand{\maketitle}{%
  \nocount{
    \frame[plain]{\titlepage}
  }
}

\title{The GIT parable}
\subtitle{Why \texttt{Untitled4copy.v112\_for\_Tom.txt} is NOT fine}

\author{Maxime Rio}
\date{26th November 2015}

\begin{document}
\maketitle

\begin{frame}{Where it is coming from}
\begin{itemize}
  \item originate from Tom Preston-Werner's article
    \footnote{\url{http://tom.preston-werner.com/2009/05/19/the-git-parable.html}}
  \item describe how to build yourself -- from scratch --\\
        a \alert{version control system} (VCS)
  \item i.e. introduce internals of GIT !
  \item skipped parts: history rewritting and file storage
\end{itemize}
\end{frame}


\begin{frame}{A bunch of text files in a folder}
\framesubtitle{is the start of an \alert{awesome} project}
\twocolumns{%
  \begin{block}{You have}
  \begin{itemize}
    \item<1-> 1 project (= 1 folder)
    \item<2-> a collection of text files (scripts, notes...)
  \end{itemize}
  \end{block}

  \onslide<3->{%
  \begin{block}{\alert{You want to}}
  \begin{itemize}
    \item backup work periodically
    \item keep track of changes
    \item share your work and keep things synced
  \end{itemize}
  \end{block}%
  }
}{%
  \only<1>{\fig[width=\textwidth]{figs/content_folder.png}}%
  \only<2-3>{\fig[width=\textwidth]{figs/content_files.png}}%
  \only<4->{%
  \begin{block}{All you need is}
  \begin{itemize}
    \item a text editor
    \item a file browser (or a terminal ;-)
  \end{itemize}
  \end{block}%
  }%
}
\end{frame}


\begin{frame}{Keep copies of modified files}
\twocolumns{
  \begin{itemize}
    \item<+-> keep a backup before modifying a file
    \item<+-> and do it again
    \item<+-> and which versions work together ?
    \item<+-> \alert{\Large bad bad bad idea}
  \end{itemize}
}{%
  \only<1>{\fig[width=\textwidth]{figs/backup_warr.png}}%
  \only<2>{\fig[width=\textwidth]{figs/backup_warr2.png}}%
  \only<3>{\fig[width=\textwidth]{figs/backup_conflict.png}}%
  \only<4->{\fig[width=\textwidth]{figs/backup_bad.png}}%
}
\end{frame}


\begin{frame}{Keep copies of the folder: snapshots}
\twocolumns{%
  \begin{itemize}
    \item<+-> \emph{working} folder keeps the working copy
    \item<+-> copy the whole folder when done
    \item<+-> add a message file...
    \item<+-> ...with date, author and changes introduced
  \end{itemize}

  \onslide<5->{%
  \begin{block}{benefits}
  \begin{itemize}
    \item keep things synced in backup folders
    \item linear view of project history
  \end{itemize}
  \end{block}%
  }
}{%
  \only<1>{\fig[width=\textwidth]{figs/snapshots_working.png}}%
  \only<2>{\fig[width=\textwidth]{figs/snapshots_backup.png}}%
  \only<3>{\fig[width=\textwidth]{figs/snapshots_files.png}}%
  \only<4>{\fig[width=\textwidth]{figs/snapshots_message.png}}%
  \only<5>{\fig[width=\textwidth]{figs/snapshots_history.png}}%
}
\end{frame}


\begin{frame}{Fix old versions: branches}
% copy old backup to "work"
% fix problem
% backup with a message
% add original backup folder name in the message

% just made a branch
% from linear history to tree
\twocolumns{%
}{%
  \only<1>{\fig[width=\textwidth]{figs/fixold_bug.png}}%
  \only<2>{\fig[width=\textwidth]{figs/fixold_copy.png}}%
  \only<3>{\fig[width=\textwidth]{figs/fixold_fixed.png}}%
  \only<4>{\fig[width=\textwidth]{figs/fixold_snap.png}}%
  \only<5>{\fig[width=\textwidth]{figs/fixold_message.png}}%
  \only<6>{\fig[width=\textwidth]{figs/fixold_tree.png}}%
}
\end{frame}


\begin{frame}{Keep track of branches}
% different branches for different purpose
% (fixes, new feature, releases...)
% add "branches" files for tracking
% name of last snapshots for each branch
\twocolumns{%
}{%
  \only<1>{\fig[width=\textwidth]{figs/branches_folders.png}}%
  \only<2>{\fig[width=\textwidth]{figs/branches_message.png}}%
}
\end{frame}


\begin{frame}{Record specific events: tags}
% name specific snapshots
% ex: version-1.0.1, journal-submission
% add "tags" file for tracking
% relates snapshot name to tag name
\twocolumns{%
}{%
  \only<1>{\fig[width=\textwidth]{figs/tags_folders.png}}%
  \only<2>{\fig[width=\textwidth]{figs/tags_message.png}}%
}
\end{frame}


\begin{frame}{Share your work with someone else}
% send a copy of everything to your partner !
% explain how it works
% partner adding new snapshots and you too...
% numbering broken when put back together
\twocolumns{%
}{%
  \vspace{-1em}
  \only<1>{\fig[width=\textwidth]{figs/share.png}}%
  \only<2>{\fig[width=\textwidth]{figs/share_copy.png}}%
  \only<3>{\fig[width=\textwidth]{figs/share_news.png}}%
  \only<4>{\fig[width=\textwidth]{figs/share_conflict.png}}%
}
\end{frame}


\begin{frame}{Putting things back together: hash names}
% hash of a file = "unique" string depending on file content
% replace snapshot names with hash of message files
% message files are unique = hash names are unique
% no collision anymore
\twocolumns{%
}{%
  \vspace{-1em}
  \only<1>{\fig[width=\textwidth]{figs/hash_message.png}}%
  \only<2>{\fig[width=\textwidth]{figs/hash_rename.png}}%
  \only<3>{\fig[width=\textwidth]{figs/hash_news.png}}%
  \only<4>{\fig[width=\textwidth]{figs/hash_merge.png}}%
}
\end{frame}


\begin{frame}{Putting things back together: merging}
% concurrent changes in 2 snapshots
% select relevant changes from each
% create a new snapshot after selection
% special message with two parent snapshots
% that's it
\twocolumns{%
}{%
  \vspace{-1em}
  \only<1>{\fig[width=\textwidth]{figs/merge_state.png}}%
  \only<2>{\fig[width=\textwidth]{figs/merge_folders.png}}%
  \only<3>{\fig[width=\textwidth]{figs/merge_message.png}}%
}
\end{frame}


\begin{frame}{Prepare a snapshot: staging area}
% new folder to prepare snapshots
% copy their only what's needed for next snapshot
% decouple work done from logical changes
\twocolumns{%
}{%
  \vspace{-1em}
  \only<1>{\fig[width=\textwidth]{figs/staging.png}}%
  \only<2>{\fig[width=\textwidth]{figs/staging_add.png}}%
  \only<3>{\fig[width=\textwidth]{figs/staging_snap.png}}%
}
\end{frame}


\begin{frame}{Comparing snapshots: diffs}
% quick look at differences
% help knowing what is not yet in staging folder
\end{frame}


\begin{frame}{Smart storage/access: GIT}
% same files copied over and over

% GIT put everything in .git
% deduplicate files
% compress the whole thing

% cumbersome manipulations

% GIT provide commands:
% git init, git clone
% git add, git commit
% git pull, git push, git merge
% git diff
% git log
% or use a GUI
\twocolumns{%
}{%
  \fig[width=\textwidth]{figs/git_folder.png}%
}
\end{frame}


\begin{frame}{Collaborative plateforms }
\framesubtitle{Bitbucket, Github, Gitlab...}
% another collaborator: a central server 
% central node to sync everyone
% provides other tools: wiki, ticket systems...
% usage is not part of this talk ;-)
\end{frame}


\begin{frame}
\begin{center}\huge
Questions?
\end{center}
\end{frame}

\end{document}
