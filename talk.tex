\documentclass[english]{slides}
\usepackage[english]{common}

\renewcommand{\maketitle}{%
  \nocount{
    \frame[plain]{\titlepage}
  }
}

\title{The GIT parable}
\subtitle{Why \texttt{Untitled4copy.v112\_for\_Tom.txt} is NOT fine}

\author{Maxime Rio}
\date{26th November 2015}

\begin{document}
\maketitle

\begin{frame}{Where it is coming from}
\begin{itemize}
  \item originate from Tom Preston-Werner's article
    \footnote{\url{http://tom.preston-werner.com/2009/05/19/the-git-parable.html}}
  \item describe how to build yourself -- from scratch --\\
        a \alert{version control system} (VCS)
  \item i.e. introduce internals of GIT !
  \item skipped parts: history rewriting and file storage
\end{itemize}
\end{frame}


\begin{frame}{A bunch of text files in a folder}
\framesubtitle{is the start of an \alert{awesome} project}
\twocolumns{%
  \begin{block}{You have}
  \begin{itemize}
    \item<1-> 1 project (= 1 folder)
    \item<2-> a collection of text files (scripts, notes...)
  \end{itemize}
  \end{block}

  \onslide<3->{%
  \begin{block}{\alert{You want to}}
  \begin{itemize}
    \item backup work periodically
    \item keep track of changes
    \item share your work and keep things synced
  \end{itemize}
  \end{block}%
  }
}{%
  \only<1>{\fig[width=\textwidth]{figs/content_folder.png}}%
  \only<2-3>{\fig[width=\textwidth]{figs/content_files.png}}%
  \only<4->{%
  \begin{block}{All you need is}
  \begin{itemize}
    \item a text editor
    \item a file browser (or a terminal ;-)
  \end{itemize}
  \end{block}%
  }%
}
\end{frame}


\begin{frame}{Keep copies of modified files}
\twocolumns{
  \begin{itemize}
    \item<+-> keep a backup before modifying a file
    \item<+-> and do it again
    \item<+-> and which versions work together ?
    \item<+-> \alert{\Large bad bad bad idea}
  \end{itemize}
}{%
  \only<1>{\fig[width=\textwidth]{figs/backup_warr.png}}%
  \only<2>{\fig[width=\textwidth]{figs/backup_warr2.png}}%
  \only<3>{\fig[width=\textwidth]{figs/backup_conflict.png}}%
  \only<4->{\fig[width=\textwidth]{figs/backup_bad.png}}%
}
\end{frame}


\begin{frame}{Keep copies of the folder: snapshots}
\twocolumns{%
  \begin{itemize}
    \item<+-> \emph{working} folder keeps the working copy
    \item<+-> copy the whole folder when done
    \item<+-> add a message file...
    \item<+-> ...with date, author and changes introduced
  \end{itemize}

  \onslide<5->{%
  \begin{block}{benefits}
  \begin{itemize}
    \item keep things synced in backup folders
    \item linear view of project history
  \end{itemize}
  \end{block}%
  }
}{%
  \only<1>{\fig[width=\textwidth]{figs/snapshots_working.png}}%
  \only<2>{\fig[width=\textwidth]{figs/snapshots_backup.png}}%
  \only<3>{\fig[width=\textwidth]{figs/snapshots_files.png}}%
  \only<4>{\fig[width=\textwidth]{figs/snapshots_message.png}}%
  \only<5>{\fig[width=\textwidth]{figs/snapshots_history.png}}%
}
\end{frame}


\begin{frame}{Fix old versions: branches}
\twocolumns{%
  \onslide<2->{%
  \begin{itemize}
    \item<2-> copy old backup to \emph{working}
    \item<3-> fix problem
    \item<4-> backup with a message
    \item<5-> add original backup folder name in the message
  \end{itemize}%
  }

  \onslide<6>{%
  \begin{block}{what happened ?}
  \begin{itemize}
    \item just made a \alert{branch}
    \item from linear history to \alert{tree}
  \end{itemize}
  \end{block}%
  }
}{%
  \only<1>{\fig[width=\textwidth]{figs/fixold_bug.png}}%
  \only<2>{\fig[width=\textwidth]{figs/fixold_copy.png}}%
  \only<3>{\fig[width=\textwidth]{figs/fixold_fixed.png}}%
  \only<4>{\fig[width=\textwidth]{figs/fixold_snap.png}}%
  \only<5>{\fig[width=\textwidth]{figs/fixold_message.png}}%
  \only<6>{\fig[width=\textwidth]{figs/fixold_tree.png}}%
}
\end{frame}


\begin{frame}{Keep track of branches}
\twocolumns{%
  \vspace{2em}
  \begin{itemize}
    \item<2-> different branches for different purpose
          (fixes, new feature, releases...)
    \item<3-> add \emph{branches} file for tracking
    \item<4-> name of last snapshot for each branch
  \end{itemize}%
}{%
  \only<1>{\fig[width=\textwidth]{figs/branches_folders.png}}%
  \only<2-3>{\fig[width=\textwidth]{figs/branches_tree.png}}%
  \only<4->{\fig[width=\textwidth]{figs/branches_message.png}}%
}
\end{frame}


\begin{frame}{Record specific events: tags}
\twocolumns{%
  \vspace{2em}
  \begin{itemize}
    \item name specific snapshots
    \begin{itemize}
      \item version 1
      \item journal-submission
      \item ...
    \end{itemize}
    \item add \emph{tags} file for tracking
    \item<2> relates snapshot name to tag name
  \end{itemize}%
}{%
  \only<1>{\fig[width=\textwidth]{figs/tags_folders.png}}%
  \only<2>{\fig[width=\textwidth]{figs/tags_message.png}}%
}
\end{frame}


\begin{frame}{Share your work with someone else}
\twocolumns{%
  \vspace{2em}
  \begin{itemize}
    \item<2-> send a copy of everything to your partner !
    \item<3-> partner adding new snapshots and you too...
    \item<4-> numbering broken when put back together
  \end{itemize}
}{%
  \vspace{-1em}
  \only<1>{\fig[width=\textwidth]{figs/share.png}}%
  \only<2>{\fig[width=\textwidth]{figs/share_copy.png}}%
  \only<3>{\fig[width=\textwidth]{figs/share_news.png}}%
  \only<4>{\fig[width=\textwidth]{figs/share_conflict.png}}%
}
\end{frame}


\begin{frame}{Putting things back together: hash names}
\twocolumns{%
  \vspace{2em}
  \begin{itemize}
    \item<+-> hash of a file = ``unique'' string depending on file content
    \item<+-> replace snapshot names with hash of message files
    \item<+-> message files are unique = hash names are unique
    \item<+-> no conflict anymore
  \end{itemize}
}{%
  \vspace{-1em}
  \only<1>{\fig[width=\textwidth]{figs/hash_message.png}}%
  \only<2>{\fig[width=\textwidth]{figs/hash_rename.png}}%
  \only<3>{\fig[width=\textwidth]{figs/hash_news.png}}%
  \only<4>{\fig[width=\textwidth]{figs/hash_merge.png}}%
}
\end{frame}


\begin{frame}{Putting things back together: merging}
\twocolumns{%
  \vspace{2em}
  \begin{itemize}
    \item<+-> concurrent changes in 2 snapshots
    \item<+-> select relevant changes from each
    \item<+-> special message with two parent snapshots
    \item<+-> that's it
  \end{itemize}
}{%
  \vspace{-1em}
  \only<1>{\fig[width=\textwidth]{figs/merge_state.png}}%
  \only<2>{\fig[width=\textwidth]{figs/merge_folders.png}}%
  \only<3->{\fig[width=\textwidth]{figs/merge_message.png}}%
}
\end{frame}


\begin{frame}{Prepare a snapshot: staging area}
\twocolumns{%
  \vspace{2em}
  \begin{itemize}
    \item<+-> new folder to prepare snapshots
    \item<+-> copy there only what's needed for next snapshot
    \item<+-> backup from \emph{staging}
  \end{itemize}

  \onslide<4>{%
  \begin{block}{benefits}
    \begin{itemize}
      \item split work done in logical chunks
    \end{itemize}
  \end{block}%
  }
}{%
  \vspace{-1em}
  \only<1>{\fig[width=\textwidth]{figs/staging.png}}%
  \only<2>{\fig[width=\textwidth]{figs/staging_add.png}}%
  \only<3->{\fig[width=\textwidth]{figs/staging_snap.png}}%
}
\end{frame}


\begin{frame}{Comparing snapshots: diffs}
% quick look at differences
% help knowing what is not yet in staging folder
\end{frame}


\begin{frame}{Smart storage/access: GIT}
  \twocolumns[0.55]{%
  \begin{itemize}
    \item GIT does all this in \emph{.git} folder
    \item<+-> with compression
    \item<+-> using dedicated commands%
    \begin{itemize}
      \item git clone, git init
      \item git add, git commit
      \item git pull, git push
      \item git merge
      \item git diff
      \item git log
    \end{itemize}
  \item<+-> or a GUI, e.g \emph{SmartGit}
  \end{itemize}
}{%
  \fig[width=\textwidth]{figs/git_folder.png}%
}
\end{frame}


\begin{frame}{Collaborative plateforms }
\framesubtitle{Bitbucket, Github, Gitlab...}
\begin{itemize}
  \item another collaborator: a central server 
  \item central node to sync everyone
  \item provides other tools: wiki, ticket systems...
  \item usage is not part of this talk ;-)
\end{itemize}
\end{frame}


\begin{frame}
\begin{center}\huge
Questions?
\end{center}
\end{frame}

\end{document}
